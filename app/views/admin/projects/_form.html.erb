<%= form_for ['admin',@project] do |f| %>

  <%= render "application/error_messages", :target => @project %>

  <fieldset>
    <legend>Details</legend>
    <div class="field">
      <%= f.label :name %>
      <%= f.text_field :name, style: 'width: 300px' %>
    </div>
    <div class="field">
      <%= f.label :who %>
      <%= f.text_field :who, style: 'width: 300px' %>
    </div>
    <div class="field">
      <%= f.label :where %>
      <%= f.text_field :where, style: 'width: 300px' %>
    </div>
    <div class="field">
      <%= f.label :what %>
      <%= f.text_field :what, style: 'width: 300px' %>
    </div>
    <div class="field">
      <%= f.label :description %>
      <%= f.text_area :description %>
    </div>
  </fieldset>

  <fieldset id="media">
    <legend>Media</legend>

    <fieldset id="photos">
      <legend>Photos</legend>
      <div><span class="hint">Click on the image to edit or delete it. Drag the image to reorder it on the project page. The first image will be the project's thumbnail.</span></div>

      <ul class="sortable" data-update-url="<%= sort_admin_photos_url %>">
      <% @project.photos.each do |photo| %>
        <% unless photo.new_record? %>
          <%= content_tag_for :li, photo do %>
            <%= link_to "#{image_tag(photo.image_url(:thumb))}".html_safe, edit_admin_photo_path(photo) %>
          <% end %>
        <% end %>
      <% end %>
      </ul>

    <fieldset>
      <legend>Upload new photos</legend>
      <span class="hint">Use the boxes below to pick the photos you want to upload, then click the submit button at the bottom of the page</span><br/><br/>

    <%= f.fields_for :photos do |p| %>
      <% if p.object.new_record? %>
      <div class="field">
        <%= p.label :image %>
        <%= p.file_field :image, style: 'width: 300px' %>
      </div>
      <% end %>
    <% end %>
  </fieldset>

  </fieldset>


    <fieldset id="videos">
      <legend>Videos</legend>

      <div data-update-url="<%= sort_videos_admin_projects_url %>">
        <%= link_to "Click to open YouTube", "http://www.youtube.com/my_videos?feature=mhee", target: 'blank', style: 'float: right' %>
        <br/><p><span class="hint">Choose the videos for this project page from your youtube channel using the combobox below</span></p>

        <%= f.select :video_ids, options_for_select(
          Video.all.map{ |v| [v.name, v.id ]},
          Video.all.map{|v| v.id if v.project_id == @project.id && v.project_id.present? }), {}, multiple: true, id: 'multi' %>
      </div>
    </fieldset>
  </fieldset>

  <fieldset id="quotes">
    <legend>Quotes</legend>

    <span class="hint">Fill out the boxes below for any quotes that you want to show on the project page</span>

    <%= f.fields_for :quotes do |q| %>
      <fieldset class="quote" id="<%= dom_id q.object %>">
        <legend>Quote</legend>
        <% unless q.object.new_record? %>
        <%= link_to "remove", '#', class: 'delete' %>
        <%#= admin_quote_path(q.object), remote: true, method: 'delete', confirm: 'Are you sure?', %>
        <% end %>
        <div class="field">
        <%= q.label :body %>
        <%= q.text_area :body, placeholder: "Urban Lights were great", rows: 6 %>
        </div>
        <div class="field">
        <%= q.label :author %>
        <%= q.text_field :author, placeholder: "Richard Branson", style: 'width: 300px' %>
        </div>
        <div class="field">
        <%= q.label :position %>
        <%= q.text_field :position, placeholder: "CEO", style: 'width: 300px' %>
        </div>
        <div class="field">
        <%= q.label :organisation %>
        <%= q.text_field :organisation, placeholder: "Virgin", style: 'width: 300px' %>
        </div>
        <%#= q.label :_destroy, 'Delete Quote' %>
        <%= q.hidden_field :_destroy, class: 'delete_checkbox' %>
      </fieldset>
    <% end %>
  </fieldset>




  <div>
    <%= f.submit %>
  </div>
<% end %>